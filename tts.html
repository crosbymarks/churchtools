<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Speech Sample - Multi-Language</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f9;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
        }

        /* The main container for the prayer */
        .prayer-box {
            background-color: #fff;
            width: 300px;
            height: 400px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
            margin-bottom: 20px;
        }

        .scrolling-content {
            position: absolute;
            width: 100%;
            height: 100%;
            text-align: center;
            animation: scrollUp 25s linear infinite;
        }

        .prayer-box:hover .scrolling-content {
            animation-play-state: paused;
        }

        .prayer-text {
            padding: 20px;
            font-size: 1.2rem;
            line-height: 1.6;
            color: #2c3e50;
            padding-top: 400px;
        }

        /* Controls Section */
        .controls-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            width: 300px; /* Match box width */
        }

        .control-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            gap: 10px;
        }

        label {
            font-size: 0.9rem;
            color: #555;
            font-weight: 600;
        }

        select {
            padding: 5px;
            border-radius: 4px;
            border: 1px solid #ccc;
            flex-grow: 1;
        }

        input[type=range] {
            flex-grow: 1;
            cursor: pointer;
        }

        .speed-value {
            font-weight: bold;
            min-width: 35px;
            text-align: right;
            color: #333;
            font-size: 0.9rem;
        }

        .button-group {
            display: flex;
            gap: 10px;
            width: 100%;
            justify-content: center;
        }

        button {
            flex: 1;
            padding: 10px;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .btn-speak { background-color: #28a745; color: white; }
        .btn-speak:hover { background-color: #218838; }

        .btn-stop { background-color: #dc3545; color: white; }
        .btn-stop:hover { background-color: #c82333; }

        @keyframes scrollUp {
            0% { transform: translateY(0); }
            100% { transform: translateY(-100%); }
        }
    </style>
</head>
<body>

    <h1>Text to Speech Sample</h1>

    <div class="prayer-box">
        <div class="scrolling-content">
            <div id="prayerText" class="prayer-text"></div>
        </div>
    </div>

    <div class="controls-container">
        <div class="control-row">
            <label for="langSelect">Language:</label>
            <select id="langSelect">
                <option value="en">English</option>
                <option value="es">Spanish</option>
            </select>
        </div>

        <div class="control-row">
            <label for="rateSlider">Speed:</label>
            <input type="range" id="rateSlider" min="0.5" max="2.0" step="0.1" value="0.9">
            <span id="rateValue" class="speed-value">0.9x</span>
        </div>

        <div class="button-group">
            <button class="btn-speak" onclick="speakPrayer()">Read Prayer</button>
            <button class="btn-stop" onclick="stopPrayer()">Stop</button>
        </div>
    </div>

    <script>
        // --- Data: The text for both languages ---
        const PRAYERS = {
            en: `Our Father, who art in heaven, <br>
                 hallowed be thy name; <br>
                 thy kingdom come; <br>
                 thy will be done <br>
                 on earth as it is in heaven. <br>
                 Give us this day our daily bread; <br>
                 and forgive us our trespasses <br>
                 as we forgive those <br>
                 who trespass against us; <br>
                 and lead us not into temptation, <br>
                 but deliver us from evil. <br>
                 Amen.`,
            es: `Padre nuestro, que estás en el cielo, <br>
                 santificado sea tu Nombre; <br>
                 venga a nosotros tu reino; <br>
                 hágase tu voluntad <br>
                 en la tierra como en el cielo. <br>
                 Danos hoy nuestro pan de cada día; <br>
                 perdona nuestras ofensas, <br>
                 como también nosotros perdonamos <br>
                 a los que nos ofenden; <br>
                 no nos dejes caer en la tentación, <br>
                 y líbranos del mal. <br>
                 Amén.`
        };

        // --- References ---
        const prayerTextDiv = document.getElementById("prayerText");
        const langSelect = document.getElementById("langSelect");
        const rateSlider = document.getElementById("rateSlider");
        const rateValueDisplay = document.getElementById("rateValue");

        // --- Initialization ---
        // Load English by default
        prayerTextDiv.innerHTML = PRAYERS['en'];

        // --- Event Listeners ---

        // 1. Language Change
        langSelect.addEventListener('change', function() {
            // Stop current speech
            window.speechSynthesis.cancel();
            
            // Swap text immediately
            const selectedLang = this.value; // 'en' or 'es'
            prayerTextDiv.innerHTML = PRAYERS[selectedLang];
        });

        // 2. Slider Change
        rateSlider.addEventListener('input', function() {
            rateValueDisplay.textContent = this.value + "x";
            
            // Restart speech if currently active to apply new speed
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
                setTimeout(speakPrayer, 50);
            }
        });

        // --- Core Functions ---

        function speakPrayer() {
            window.speechSynthesis.cancel();

            // Get current text content (strips HTML tags like <br> automatically)
            const textToRead = prayerTextDiv.innerText;
            const utterance = new SpeechSynthesisUtterance(textToRead);

            // Set Language for correct accent
            const currentLang = langSelect.value;
            if (currentLang === 'es') {
                utterance.lang = 'es-ES'; // Spanish
            } else {
                utterance.lang = 'en-US'; // English
            }

            // Set Speed
            utterance.rate = parseFloat(rateSlider.value);
            
            // Set Pitch/Volume
            utterance.pitch = 1;
            utterance.volume = 1;

            window.speechSynthesis.speak(utterance);
        }

        function stopPrayer() {
            window.speechSynthesis.cancel();
        }
    </script>

</body>
</html>
